.. include:: ./../ext_links.txt

Configuration Options for ``numba-dpex``
========================================

``numba-dpex`` provides a set of environment variables and flags for configuring different aspects of the compilation, debugging and execution of programs. The configuration flags of ``numba-dpex`` are mostly inherited from those of Numba*. They are defined in :file:`numba_dpex/core/config.py`.

.. note::
    In order to enable/disable each of the configuration flags, a ``NUMBA_DPEX``
    prefix needs to be appended before each variable. For example, in order to
    turn ``SAVE_IR_FILES`` flag on, it needs to be passed as ``NUMBA_DPEX_SAVE_IR_FILES=1``

    For example:

    .. code-block:: bash

        user@host:~/NUMBA_DPEX_SAVE_IR_FILES=1 python numba_dpex_program.py


The list of available configuration flags are listed as follows:

``SAVE_IR_FILES``:
    A flag to save the Numba* intermediate representation (IR) files generated by the compiler. Set to ``0`` by default.

``SPIRV_VAL``:
    A flag to turn Numba*'s ``SPIRV-VALIDATION`` switch. Set to ``0`` by default.

``OFFLOAD_DIAGNOSTICS``:
    A flag to dump the offload diagnostics. Set to ``0`` by default.

``NATIVE_FP_ATOMICS``:
    A flag to activate the native floating point (FP) atomcis support for supported devices. Requires ``llvm-spirv`` supporting the FP atomics extension. Set to ``0`` by default.

``DEBUG``:
    A flag to emit the debug info, inherited from |numba.core.config.DEBUG|_.

``DEBUGINFO_DEFAULT``:
    The default value for the `debug` flag. Inherited from |numba.core.config.DEBUGINFO_DEFAULT|_.

``DUMP_KERNEL_LLVM``:
    A flag to emit LLVM assembly language format (``.ll``). Inherited from |numba.core.config.DUMP_OPTIMIZED|_.

``ENABLE_CACHE``:
    A flag to enable caching, set ``NUMBA_DPEX_ENABLE_CACHE=0`` to turn off. Set to ``1`` by default.

``CACHE_SIZE``:
    A flag to specify the default cache size. Set to ``20`` by default.

``DEBUG_CACHE``:
    A flag to enable debugging of cahcing mechanism, set ``1`` to turn it on.

``STATIC_LOCAL_MEM_PASS``:
    A flag to turn on the ``ConstantSizeStaticLocalMemoryPass`` in the kernel pipeline. The pass is turned off by default.


.. |numba.core.config.DEBUG| replace:: ``numba.core.config.DEBUG``
.. |numba.core.config.DEBUGINFO_DEFAULT| replace:: ``numba.core.config.DEBUGINFO_DEFAULT``
.. |numba.core.config.DUMP_OPTIMIZED| replace:: ``numba.core.config.DUMP_OPTIMIZED``

.. _`numba.core.config.DEBUG`: https://github.com/numba/numba/blob/main/numba/core/config.py#L202
.. _`numba.core.config.DEBUGINFO_DEFAULT`: https://github.com/numba/numba/blob/main/numba/core/config.py#L488
.. _`numba.core.config.DUMP_OPTIMIZED`: https://github.com/numba/numba/blob/main/numba/core/config.py#L301
